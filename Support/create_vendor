# This file shows how the vendor folder has been created.
# In theory, it can be executed, but it's very fragile. It could easily
# break if any of the involved parts are changed (or not on 10.11).

# Cleanup
# sudo rm -r cssselect cssutils lxml premailer vendor

mkdir vendor

# cssutils/encutils
# https://bitbucket.org/cthedot/cssutils
hg clone https://bitbucket.org/cthedot/cssutils
(cd cssutils; python setup.py build)
rm -r cssutils/build/lib/cssutils/tests
mv cssutils/build/lib/cssutils vendor/
mv cssutils/build/lib/encutils vendor/
(cd cssutils; python setup.py --license) > vendor/cssutils-license.txt

# cssselect
# https://github.com/SimonSapin/cssselect/
git clone https://github.com/SimonSapin/cssselect/
(cd cssselect; python setup.py build)
mv cssselect/build/lib/cssselect vendor/
cp cssselect/LICENSE vendor/cssselect-license.txt

# lxml
# https://github.com/lxml/
git clone https://github.com/lxml/lxml.git
sudo pip install cython
(cd lxml; ARCHFLAGS="-arch x86_64" python setup.py build)
mv lxml/build/lib.macosx-10.11-intel-2.7/lxml vendor/
cp lxml/LICENSES.txt vendor/lxml-license.txt

# premailer
git clone https://github.com/peterbe/premailer
(cd premailer; python setup.py build)
mv premailer/build/lib/premailer vendor/
cp premailer/LICENSE vendor/premailer-license.txt
